<!doctype html>
<html>

<head>
  <meta charset="utf-8" />
  <link rel="icon" type="image/x-icon" href="./favicon.ico" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Averia+Sans+Libre&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Ubuntu&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">

  <link rel="stylesheet" type="text/css" href="style.css">

  <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.min.js"></script>
  <script src="  https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/addons/p5.sound.min.js"></script>

  <title>Listen to the Islands</title>
</head>

<body id="body">

  <div class="legenda">

    <div class="title"><span id="island-name">Listen to the Islands</span> <span class="material-icons-outlined md-36" id="nav-icon">close</span>
    </div>

    <div class="menu">

      <div class="subpages">
        <span>About Listen to the Islands</br></span>
      </div>

      <div class="lang">
        <span>EN</span>
        <span>FI</span>
        <span>SV</span>
        <span>EE</span>
        <span>NO</span>
        <span>DK</span>
      </div>

    </div>
  </div>

</body>

</html>

<script>
  let opened = true

  $("#nav-icon").click(function() {
    if (opened) {
      $("#nav-icon").text("expand_more")
      opened = false;
    } else {
      $("#nav-icon").text("close")
      opened = true;
    }
    $(".menu").toggle();
  });

  $("#change-subject").click(function() {
    $(".menu").toggle();
    $("#subjects-browse").html("<span>History</br></span>");
    $("#switch").html("<span>Change region</span>");
  });

  let shapes = [];
  let islands = [];
  let  bx = 0;
  let  by = 0;

  function windowResized(){
    resizeCanvas(window.innerWidth, window.innerHeight);
  }


  function preload() {

    for (i = 0; i <= 11; i++) {
      numerek = i + 1;
      shapes[i] = loadImage("./wyspy/" + numerek + ".png");
    }
  }

  function setup() {
    pixelDensity(1)

    canvas = createCanvas(window.innerWidth, window.innerHeight);
    //canvas.parent("body");

    textFont("Averia Sans Libre");
    textAlign(CENTER);

    for (i = 0; i < 12; i++) {
      islands[i] = new Wyspa (shapes[i]);
    }
  }

  function draw() {

    if (windowWidth > windowHeight) {
       u = windowWidth/24;
    } else {
       u = windowHeight/24;
    }

    background(224);
    translate(windowWidth / 2+bx, windowHeight /2 +by);

    noFill();
    stroke(32);
    strokeWeight(0.5);
    let diameter = u*8;
    circle(0, 0, diameter);

    for (let i = 1; i <= 12; i++) {
      circle(0, 0, diameter * i);
    }

    for (let i = 1; i <= 12; i++) {
      push();
      rotate(i * (TWO_PI / 12));
      line(0, diameter / 2, 0, windowHeight*2);
      pop();
    }

    for (i = 0; i < 12; i++) {
      islands[i].draw(u*10);
    }

    fill(32);
    noStroke();
    textSize(u);
    textAlign(CENTER, CENTER);
    text("Listen to\nthe Islands", 0, 0);
  }

  function Wyspa(plik) {
    this.plik = plik;
    this.width = plik.width;
    this.height = plik.height;
    this.x = random(-windowWidth, windowWidth);
    this.y = random(-windowHeight, windowHeight);

    this.region = []

    this.draw = function (size) {
      image(this.plik, this.x, this.y, size, size);
    };
  }

  function touchStarted() {
    locked = true;
    xOffset = mouseX - bx;
    yOffset = mouseY - by;
  }

  function touchMoved() {
    if (locked) {
      bx = mouseX - xOffset;
      by = mouseY - yOffset;
    }
  }

  function touchEnded() {
    locked = false;
  }

  function mousePressed() {
    locked = true;
    xOffset = mouseX - bx;
    yOffset = mouseY - by;
  }

  function mouseDragged() {
    if (locked) {
      bx = mouseX - xOffset;
      by = mouseY - yOffset;
    }
  }

  function mouseReleased() {
    locked = false;
  }
</script>
